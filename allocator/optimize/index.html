<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="FlowAllocator / FlowWorth"/><link rel="canonical" href="https://openalloc.github.io/flow/allocator/optimize"/><meta name="twitter:url" content="https://openalloc.github.io/flow/allocator/optimize"/><meta name="og:url" content="https://openalloc.github.io/flow/allocator/optimize"/><title>Optimize | FlowAllocator / FlowWorth</title><meta name="twitter:title" content="Optimize | FlowAllocator / FlowWorth"/><meta name="og:title" content="Optimize | FlowAllocator / FlowWorth"/><meta name="description" content="| Find an allocation to meet your investment objectives"/><meta name="twitter:description" content="| Find an allocation to meet your investment objectives"/><meta name="og:description" content="| Find an allocation to meet your investment objectives"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to FlowAllocator / FlowWorth"/></head><body><header><table class="headertable"><tr><td><a href="/"><img src="/images/both_icons.png" alt="FlowAllocator Logo"/></a></td><td><div class="wrapper"><a href="/" class="site-name">FlowAllocator / FlowWorth</a><p class="site-subtitle">Two Power Tools for the Do-It-Yourself Investor</p><nav><ul><li><a href="/FlowAllocator">Flowallocator</a></li><li><a href="/FlowWorth">Flowworth</a></li><li><a href="/OpenAlloc">Openalloc</a></li><li><a href="/privacy">Privacy</a></li><li><a href="/terms">Terms</a></li><li><a href="/support">Support</a></li></ul></nav></div></td></tr></table></header><div class="wrapper"><h1>Optimize Feature</h1><p>Optimization is at the heart of <em>FlowAllocator</em>’s advanced feature set.</p><p>It can be used to survey the millions of possible allocations, to find those that best meet your investment objectives.</p><p>For example, to find an allocation that keeps realized gains to a minimum.</p><h2>Surveying allocation space</h2><p>The number of possible allocations to consider can be astronomical, counting into the millions and even billions.</p><p>While <em>FlowAllocator</em>’s code is tuned for performance, there is nevertheless heavy lifting to be done to survey the allocation space.</p><p>The number of allocations is determined by the product of three attributes:</p><ul><li>trading account permutations</li><li>trading asset class permutations</li><li>128 flow mode positions (the slider)</li></ul><pre><code>128 * factorial(accountCount) * factorial(assetCount)
</code></pre><p>So for example, with 3 trading accounts and 7 trading assets:</p><pre><code>128 * 3! * 7! = 3,870,720
</code></pre><p>...or approximately 3.9M allocations. This will usually take a minute or two on a Mac with an M1 processor, with all 8 cores employed.</p><h2>Optimization results</h2><p>The three ‘Result’ tabs can be independently configured to prioritize different goals. For example, the first tab can prioritize ‘Net Gains’ in ascending order, and the others different priorities.</p><p>Once started, an optimization will populate the results according to their respective priorities.</p><p>Not all allocations will qualify. Those that violate a user-defined ‘Cap’ for an account will be discarded. The ‘Discard Rate’ is shown in the performance stats.</p><p>While the optimization is running, click on an allocation to view the results in detail.</p><p>Note that modifying the model or changing the strategy will interrupt the optimization and clear the results.</p><h2>Optimization setup</h2><h3>Top-N count</h3><p>The maximum number of allocations to display in each result tab.</p><h3>Max cores</h3><p>The maximum number of cores to be used in the background operations of the optimization.</p><h3>Priority</h3><p>The operating system priority given to the background operations. Setting this to ‘Adaptive’ (the default) delegates the decision to the operating system.</p><h2>Optimization tips</h2><p>There can be too much of a good thing. If the number of allocations is high, such as over 30M, it can take an unacceptably long time to conduct a full survey.</p><p>For example 4M allocations takes approximately a minute on an M1 processor, at a rate of 67K allocations/sec. To survey 4 billion at that rate would take 1,000 minutes, or 17 hours.</p><p>Therefore, you can improve performance by reducing the number of allocations. This usually means limiting the number of trading assets and accounts to keep their permutations from ballooning.</p><h3>Reduce Trading Assets with Roll-up</h3><p><em>FlowAllocator</em>’s <em>Roll-up Assets</em> consolidation features can reduce the number of trading assets.</p><p>First, this feature can simplify your allocation by combining smaller allocations with related ones. For example, a 5% allocation to Japan equities can be ‘rolled’ into a 7% allocation to foreign equities, making a net 12% allocation to foreign equities.</p><p>See the Consolidation help for further details on tuning Roll-up.</p><h3>Reduce Trading Accounts</h3><p>For trading accounts that are relatively static, configure them as non-trading. (The trade-off is ‘orphaning’ holdings that no longer participate in your allocation.)</p><p>Consolidate your accounts where feasible. For example if you have two taxable accounts, move assets to combine them into one.</p><p>This can also reduce trading assets. When a non-trading account provides full coverage for an asset, it’s eliminated from the list of trading assets.</p><h3>Other optimize tips</h3><p>Of course, running on a faster computer with additional cores will improve performance.</p><h2>Survey versus random sampling</h2><p>The survey is presently deterministic. There is no randomization.</p><p>The only ‘sampling’ that is done is based on the fixed sequence of flow modes, and the rules of the allocation.</p><h2>The Flow Mode Sequence</h2><p>Flow Mode is a value in the range 0...1, or 0%...100% as shown in the slider. The full sequence of Flow Modes used in a survey (when sorted) is</p><pre><code>0/127, 1/127, 2/127, ..., 127/127.
</code></pre><p>However, the sequence has a fixed arrangement to survey broadly and then narrow down as optimization progresses. This allows optimizations to be interrupted and still get suitable results.</p></div><footer><p>Copyright 2021-2022, OpenAlloc LLC. All Rights Reserved</p><p>Follow <a href="https://twitter.com/FlowAllocator">@FlowAllocator</a> on Twitter</p></footer></body></html>